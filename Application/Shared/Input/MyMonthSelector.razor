@using Application.Common.Services
@inject MonthsService MonthsService
@inherits MudSelect<int>

<MudField>
    <MudSelect T="int" Label="Месяц" AnchorOrigin="Origin.BottomCenter" @bind-Value="Value" ToStringFunc="ToStringFunc">
        @foreach (var month in Enumerable.Range(1, 12))
        {
            <MudSelectItem Value="@month"/>
        }
    </MudSelect>
    @if (!Required)
    {
        <MudIconButton Icon="@Icons.Material.Filled.Cancel" Variant="Variant.Outlined" Color="Color.Secondary" Size="Size.Small" OnClick="Deselect"/>
    }
</MudField>

@code
{
    private string ToStringMonth(int month)
    {
        return month != default ? MonthsService.GetName(month) : "-";
    }

    private void Deselect()
    {
        Value = default;
    }
}