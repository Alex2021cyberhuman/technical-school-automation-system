@inherits MudSelect<int?>

<MudField Label="Год">
    <MudSelect T="int?" AnchorOrigin="Origin.BottomCenter" @bind-Value="Value">
        @foreach (var year in Years)
        {
            <MudSelectItem Value="@year">@year</MudSelectItem>
        }
    </MudSelect>
    @if (!Required)
    {
        <MudIconButton Icon="@Icons.Material.Filled.Cancel" Variant="Variant.Outlined" Color="Color.Primary" Size="Size.Small" OnClick="Deselect"/>
    }
</MudField>

@code
{
    [Parameter]
    public int MinimalYear { get; set; } = 1949;

    [Parameter]
    public int MaximumYear { get; set; } = DateTime.Now.Year;

    public List<int> Years => Enumerable.Range(MinimalYear, MaximumYear - MinimalYear + 1).ToList();

    protected override void OnParametersSet()
    {
        base.OnParametersSet();
        if (Required && Value is null)
        {
            Value = MaximumYear;
        }
    }

    private void Deselect()
    {
        Value = null;
    }
}